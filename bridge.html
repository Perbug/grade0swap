<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>
  <title>Token Bridge</title>
</head>
<body>

<h1>Token Bridge</h1>

<div>
  <label for="amount">Amount:</label>
  <input type="number" id="amount" placeholder="Enter amount" />
</div>

<div>
  <label for="toAddress">To Address:</label>
  <input type="text" id="toAddress" placeholder="Enter recipient address" />
</div>

<button onclick="connectWallet()">Connect to Wallet</button>
<button onclick="burnTokens()">Burn Tokens</button>
<button onclick="mintTokens()">Mint Tokens</button>

<script>
  // Replace with the address of your BridgeBsc and BridgeEth contracts
  const bridgeBscAddress = '0xD0ae14EbaA4e6AD5458Ddc3a00Ce6Da24CC2076E';
  const bridgeEthAddress = '0x5f2ae2d8f75b777a82142dcbfec6d83434b96ac1';

  // Replace with the ABI of your IToken contract
  const tokenABI = [
    {
      "constant": false,
      "inputs": [
        {"name": "to", "type": "address"},
        {"name": "amount", "type": "uint256"}
      ],
      "name": "mint",
      "outputs": [],
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {"name": "owner", "type": "address"},
        {"name": "amount", "type": "uint256"}
      ],
      "name": "burn",
      "outputs": [],
      "type": "function"
    }
  ];

  const web3 = new Web3(Web3.givenProvider);

  // Replace with the deployed address of your IToken contract on both networks
  const tokenBscAddress = '0xd2e89db8d82cFBa24963E92EFc6c7B1f6acAc1BB';
  const tokenEthAddress = '0xa3c5934580801b98ad9170e7D13F1654C4096121';

  const tokenBsc = new web3.eth.Contract(tokenABI, tokenBscAddress);
  const tokenEth = new web3.eth.Contract(tokenABI, tokenEthAddress);

  async function connectWallet() {
    if (window.ethereum) {
      try {
        await window.ethereum.request({ method: 'eth_requestAccounts' });
        alert('Wallet connected!');
      } catch (error) {
        alert('Wallet connection failed.');
      }
    } else {
      alert('MetaMask not detected. Please install MetaMask to use this feature.');
    }
  }

  async function burnTokens() {
    const amount = document.getElementById('amount').value;
    const toAddress = document.getElementById('toAddress').value || await getConnectedAddress();

    await tokenEth.methods.burn(toAddress, amount).send({ from: toAddress });
    alert(`Tokens burned on Ethereum network. Please wait for confirmation.`);

    // You may want to wait for the transaction to be mined before proceeding to mint on BSC
    // Add logic to check for transaction confirmation

    await tokenBsc.methods.mint(await getConnectedAddress(), amount).send({ from: await getConnectedAddress() });
    alert(`Tokens minted on GR0 network. Transaction complete.`);
  }

  async function mintTokens() {
    const amount = document.getElementById('amount').value;
    const toAddress = document.getElementById('toAddress').value || await getConnectedAddress();

    await tokenBsc.methods.burn(toAddress, amount).send({ from: toAddress });
    alert(`Tokens burned on GR0 network. Please wait for confirmation.`);

    // You may want to wait for the transaction to be mined before proceeding to mint on Ethereum
    // Add logic to check for transaction confirmation

    await tokenEth.methods.mint(await getConnectedAddress(), amount).send({ from: await getConnectedAddress() });
    alert(`Tokens minted on Ethereum network. Transaction complete.`);
  }

  async function getConnectedAddress() {
    const accounts = await web3.eth.getAccounts();
    return accounts[0];
  }
</script>

</body>
</html>







